##https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/0NGAKG
load("PROMIS 1 Wave 1.RData")
id<-table$caseid


nms<-list()
## Emotional Distress – Anger
nms$anger <-
c("EDANG01", "EDANG02", "EDANG03", "EDANG04", "EDANG05", "EDANG06", 
"EDANG07", "EDANG08", "EDANG09", "EDANG10", "EDANG11", "EDANG12", 
"EDANG13", "EDANG14", "EDANG15", "EDANG16", "EDANG17", "EDANG18", 
"EDANG19", "EDANG20", "EDANG21", "EDANG22", "EDANG23", "EDANG24", 
"EDANG25", "EDANG26", "EDANG27", "EDANG28", "EDANG29", "EDANG30", 
"EDANG31", "EDANG32", "EDANG33", "EDANG34", "EDANG35", "EDANG36", 
"EDANG37", "EDANG38", "EDANG39", "EDANG40", "EDANG41", "EDANG42", 
"EDANG43", "EDANG44", "EDANG45", "EDANG46", "EDANG47", "EDANG48", 
"EDANG49", "EDANG50", "EDANG51", "EDANG52", "EDANG53", "EDANG54", 
"EDANG55", "EDANG56")
## Emotional Distress – Anxiety
nms$anxiety<-c("EDANX01", "EDANX02", "EDANX03", "EDANX04", "EDANX05", "EDANX06", 
"EDANX07", "EDANX08", "EDANX09", "EDANX10", "EDANX11", "EDANX12", 
"EDANX13", "EDANX14", "EDANX15", "EDANX16", "EDANX17", "EDANX18", 
"EDANX19", "EDANX20", "EDANX21", "EDANX22", "EDANX23", "EDANX24", 
"EDANX25", "EDANX26", "EDANX27", "EDANX28", "EDANX29", "EDANX30", 
"EDANX31", "EDANX32", "EDANX33", "EDANX34", "EDANX35", "EDANX36", 
"EDANX37", "EDANX38", "EDANX39", "EDANX40", "EDANX41", "EDANX42", 
"EDANX43", "EDANX44", "EDANX45", "EDANX46", "EDANX47", "EDANX48", 
"EDANX49", "EDANX50", "EDANX51", "EDANX52", "EDANX53", "EDANX54", 
"EDANX55", "EDANX56")
## Emotional Distress – Depression
nms$depression <-
c("EDDEP01", "EDDEP02", "EDDEP03", "EDDEP04", "EDDEP05", "EDDEP06", 
"EDDEP07", "EDDEP08", "EDDEP09", "EDDEP10", "EDDEP11", "EDDEP12", 
"EDDEP13", "EDDEP14", "EDDEP15", "EDDEP16", "EDDEP17", "EDDEP18", 
"EDDEP19", "EDDEP20", "EDDEP21", "EDDEP22", "EDDEP23", "EDDEP24", 
"EDDEP25", "EDDEP26", "EDDEP27", "EDDEP28", "EDDEP29", "EDDEP30", 
"EDDEP31", "EDDEP32", "EDDEP33", "EDDEP34", "EDDEP35", "EDDEP36", 
"EDDEP37", "EDDEP38", "EDDEP39", "EDDEP40", "EDDEP41", "EDDEP42", 
"EDDEP43", "EDDEP44", "EDDEP45", "EDDEP46", "EDDEP47", "EDDEP48", 
"EDDEP49", "EDDEP50", "EDDEP51", "EDDEP52", "EDDEP53", "EDDEP54", 
"EDDEP55", "EDDEP56")
## Fatigue
nms$fatigue<-c("FATEXP1", "FATEXP10", "FATEXP11", "FATEXP12", "FATEXP13", 
"FATEXP14", "FATEXP15", "FATEXP16", "FATEXP17", "FATEXP18", "FATEXP19", 
"FATEXP2", "FATEXP20", "FATEXP21", "FATEXP22", "FATEXP23", "FATEXP24", 
"FATEXP25", "FATEXP26", "FATEXP27", "FATEXP28", "FATEXP29", "FATEXP3", 
"FATEXP30", "FATEXP31", "FATEXP32", "FATEXP33", "FATEXP34", "FATEXP35", 
"FATEXP36", "FATEXP37", "FATEXP38", "FATEXP39", "FATEXP4", "FATEXP40", 
"FATEXP41", "FATEXP42", "FATEXP43", "FATEXP44", "FATEXP45", "FATEXP46", 
"FATEXP47", "FATEXP48", "FATEXP49", "FATEXP5", "FATEXP50", "FATEXP51", 
"FATEXP52", "FATEXP53", "FATEXP54", "FATEXP55", "FATEXP56", "FATEXP6", 
"FATEXP7", "FATEXP8", "FATEXP9", "FATIMP1", "FATIMP10", "FATIMP11", 
"FATIMP12", "FATIMP13", "FATIMP14", "FATIMP15", "FATIMP16", "FATIMP17", 
"FATIMP18", "FATIMP19", "FATIMP2", "FATIMP20", "FATIMP21", "FATIMP22", 
"FATIMP23", "FATIMP24", "FATIMP25", "FATIMP26", "FATIMP27", "FATIMP28", 
"FATIMP29", "FATIMP3", "FATIMP30", "FATIMP31", "FATIMP32", "FATIMP33", 
"FATIMP34", "FATIMP35", "FATIMP36", "FATIMP37", "FATIMP38", "FATIMP39", 
"FATIMP4", "FATIMP40", "FATIMP41", "FATIMP42", "FATIMP43", "FATIMP44", 
"FATIMP45", "FATIMP46", "FATIMP47", "FATIMP48", "FATIMP49", "FATIMP5", 
"FATIMP50", "FATIMP51", "FATIMP52", "FATIMP53", "FATIMP54", "FATIMP55", 
"FATIMP56", "FATIMP6", "FATIMP7", "FATIMP8", "FATIMP9")
## Pain Behavior, ## Pain Interference
nms$pain<-c("PAININ1", "PAININ10", "PAININ11", "PAININ12", "PAININ13", 
"PAININ14", "PAININ15", "PAININ16", "PAININ17", "PAININ18", "PAININ19", 
"PAININ2", "PAININ20", "PAININ21", "PAININ22", "PAININ23", "PAININ24", 
"PAININ25", "PAININ26", "PAININ27", "PAININ28", "PAININ29", "PAININ3", 
"PAININ30", "PAININ31", "PAININ32", "PAININ33", "PAININ34", "PAININ35", 
"PAININ36", "PAININ37", "PAININ38", "PAININ39", "PAININ4", "PAININ40", 
"PAININ41", "PAININ42", "PAININ43", "PAININ44", "PAININ45", "PAININ46", 
"PAININ47", "PAININ48", "PAININ49", "PAININ5", "PAININ50", "PAININ51", 
"PAININ52", "PAININ53", "PAININ54", "PAININ55", "PAININ56", "PAININ6", 
"PAININ7", "PAININ8", "PAININ9", "PAINQU1", "PAINQU10", "PAINQU11", 
"PAINQU12", "PAINQU13", "PAINQU14", "PAINQU15", "PAINQU16", "PAINQU17", 
"PAINQU18", "PAINQU19", "PAINQU2", "PAINQU20", "PAINQU21", "PAINQU22", 
"PAINQU23", "PAINQU24", "PAINQU25", "PAINQU26", "PAINQU27", "PAINQU28", 
"PAINQU29", "PAINQU3", "PAINQU30", "PAINQU31", "PAINQU32", "PAINQU33", 
"PAINQU34", "PAINQU35", "PAINQU36", "PAINQU37", "PAINQU38", "PAINQU39", 
"PAINQU4", "PAINQU40", "PAINQU41", "PAINQU42", "PAINQU43", "PAINQU44", 
"PAINQU45", "PAINQU46", "PAINQU47", "PAINQU48", "PAINQU49", "PAINQU5", 
"PAINQU50", "PAINQU51", "PAINQU52", "PAINQU53", "PAINQU54", "PAINQU55", 
"PAINQU56", "PAINQU6", "PAINQU7", "PAINQU8", "PAINQU9", "PAINBE1", 
"PAINBE10", "PAINBE11", "PAINBE12", "PAINBE13", "PAINBE14", "PAINBE15", 
"PAINBE16", "PAINBE17", "PAINBE18", "PAINBE19", "PAINBE2", "PAINBE20", 
"PAINBE21", "PAINBE22", "PAINBE23", "PAINBE24", "PAINBE25", "PAINBE26", 
"PAINBE27", "PAINBE28", "PAINBE29", "PAINBE3", "PAINBE30", "PAINBE31", 
"PAINBE32", "PAINBE33", "PAINBE34", "PAINBE35", "PAINBE36", "PAINBE37", 
"PAINBE38", "PAINBE39", "PAINBE4", "PAINBE40", "PAINBE41", "PAINBE42", 
"PAINBE43", "PAINBE44", "PAINBE45", "PAINBE46", "PAINBE47", "PAINBE48", 
"PAINBE49", "PAINBE5", "PAINBE50", "PAINBE51", "PAINBE52", "PAINBE53", 
"PAINBE54", "PAINBE55", "PAINBE56", "PAINBE6", "PAINBE7", "PAINBE8", 
"PAINBE9")
## Physical Function*
nms$physicalfunction<-c("PFC1", "PFC10", "PFC11", "PFC12", "PFC13", "PFC14", "PFC15", 
"PFC16", "PFC17", "PFC18", "PFC19", "PFC2", "PFC20", "PFC21", 
"PFC22", "PFC23", "PFC24", "PFC25", "PFC26", "PFC27", "PFC28", 
"PFC29", "PFC3", "PFC30", "PFC31", "PFC32", "PFC33", "PFC34", 
"PFC35", "PFC36", "PFC37", "PFC38", "PFC39", "PFC4", "PFC40", 
"PFC41", "PFC42", "PFC43", "PFC44", "PFC45", "PFC46", "PFC47", 
"PFC48", "PFC49", "PFC5", "PFC50", "PFC51", "PFC52", "PFC53", 
"PFC54", "PFC55", "PFC56", "PFC6", "PFC7", "PFC8", "PFC9")
## Satisfaction with Participation in Discretionary Social Activities & ## Satisfaction with Participation in Social Roles
nms$social<-c("SRPPER01", "SRPPER02", "SRPPER03", "SRPPER04", "SRPPER05", 
"SRPPER06", "SRPPER07", "SRPPER08", "SRPPER09", "SRPPER10", "SRPPER11", 
"SRPPER12", "SRPPER13", "SRPPER14", "SRPPER15", "SRPPER16", "SRPPER17", 
"SRPPER18", "SRPPER19", "SRPPER20", "SRPPER21", "SRPPER22", "SRPPER23", 
"SRPPER24", "SRPPER25", "SRPPER26", "SRPPER27", "SRPPER28", "SRPPER29", 
"SRPPER30", "SRPPER31", "SRPPER32", "SRPPER33", "SRPPER34", "SRPPER35", 
"SRPPER36", "SRPPER37", "SRPPER38", "SRPPER39", "SRPPER40", "SRPPER41", 
"SRPPER42", "SRPPER43", "SRPPER44", "SRPPER45", "SRPPER46", "SRPPER47", 
"SRPPER48", "SRPPER49", "SRPPER50", "SRPPER51", "SRPPER52", "SRPPER53", 
"SRPPER54", "SRPPER55", "SRPPER56", "SRPSAT01", "SRPSAT02", "SRPSAT03", 
"SRPSAT04", "SRPSAT05", "SRPSAT06", "SRPSAT07", "SRPSAT08", "SRPSAT09", 
"SRPSAT10", "SRPSAT11", "SRPSAT12", "SRPSAT13", "SRPSAT14", "SRPSAT15", 
"SRPSAT16", "SRPSAT17", "SRPSAT18", "SRPSAT19", "SRPSAT20", "SRPSAT21", 
"SRPSAT22", "SRPSAT23", "SRPSAT24", "SRPSAT25", "SRPSAT26", "SRPSAT27", 
"SRPSAT28", "SRPSAT29", "SRPSAT30", "SRPSAT31", "SRPSAT32", "SRPSAT33", 
"SRPSAT34", "SRPSAT35", "SRPSAT36", "SRPSAT37", "SRPSAT38", "SRPSAT39", 
"SRPSAT40", "SRPSAT41", "SRPSAT42", "SRPSAT43", "SRPSAT44", "SRPSAT45", 
"SRPSAT46", "SRPSAT47", "SRPSAT48", "SRPSAT49", "SRPSAT50", "SRPSAT51", 
"SRPSAT52", "SRPSAT53", "SRPSAT54", "SRPSAT55", "SRPSAT56")
## Sleep Disturbance
## Sleep-related Impairment
##legacy measures: haq, sf36, physical function bank
nms$haq<-c("HAQ1a","HAQ1b","HAQ2a","HAQ2b","HAQ3a","HAQ3b","HAQ3c","HAQ4a","HAQ4b","HAQ5a","HAQ5b","HAQ5c","HAQ6a","HAQ6b","HAQ7a","HAQ7b","HAQ7c","HAQ8a","HAQ8b","HAQ8c","HAQ9","HAQ10","HAQ11","HAQ12")
##not sure which are sf36 items
##cesd
nms$cesd<-c("CESD1", "CESD2", "CESD3", "CESD4", "CESD5", "CESD6", "CESD7", 
"CESD8", "CESD9", "CESD10", "CESD11", "CESD12", "CESD13", "CESD14", 
"CESD15", "CESD16", "CESD17", "CESD18", "CESD19", "CESD20")


for (iii in 1:length(nms)) {
    nm<-nms[[iii]]
    x<-table[,nm]
    L<-list()
    for (i in 1:ncol(x)) L[[i]]<-data.frame(id=id,
                                            item=names(x)[i],
                                            resp=as.numeric(x[,i])
                                            )
    df<-data.frame(do.call("rbind",L))
    df$resp<-ifelse(df$resp==6,NA,df$resp)
    df<-df[!is.na(df$resp),]
    print(head(df))
    print(table(df$resp))
    save(df,file=paste("promis1wave1_",names(nms)[iii],".Rdata",sep=''))
}
    

